# MiniShell 프로젝트

MiniShell은 Bash 셸의 핵심 기능을 모델로 한 가벼운 커맨드 라인 인터페이스 프로젝트입니다. 이 프로젝트의 목적은 Unix/Linux 환경에서 셸의 기본적인 동작 원리를 이해하고, 사용자 정의 셸 환경을 구현하는 것입니다. MiniShell은 사용자로부터 커맨드를 입력 받아, 해당 커맨드를 실행하고 결과를 출력하는 기능을 제공합니다.

## 주요 기능

- **기본 셸 명령어 실행**: `ls`, `cd`, `echo`, `pwd`, `export`, `unset`, `env`, `exit` 등의 Bash 셸 기본 명령어 실행 지원.
- **파이프라인(Pipes)과 리디렉션**: 명령어 간 파이프(`|`) 연결 지원 및 표준 입출력 리디렉션(`>`, `>>`, `<`) 기능 구현.
- **환경 변수 관리**: 환경 변수 설정 및 제거, 로컬 변수를 활용한 명령어 실행 지원.
- **시그널 처리**: `Ctrl+C`, `Ctrl+D`, `Ctrl+\` 시그널에 대한 사용자 정의 처리 구현.

## 시작하기

MiniShell 프로젝트의 소스 코드를 다운로드하고 컴파일하여 사용할 수 있습니다. 소스 코드는 C 언어로 작성되었으며, `gcc` 컴파일러를 사용하여 컴파일할 수 있습니다.

### 컴파일 방법

1. 소스 코드를 로컬 시스템에 클론합니다:
    ```bash
    git clone https://github.com/your-username/MiniShell.git
    ```
2. 프로젝트 디렉토리로 이동합니다:
    ```bash
    cd MiniShell
    ```
3. `Makefile`을 사용하여 프로젝트를 컴파일합니다:
    ```bash
    make
    ```
4. 컴파일된 MiniShell 실행 파일을 실행하여 셸을 시작합니다:
    ```bash
    ./minishell
    ```

## 사용 예제

MiniShell에서는 기본 Bash 셸 명령어를 실행할 수 있습니다. 예를 들어, 현재 디렉토리의 파일 목록을 보려면 다음과 같이 입력합니다:
```bash
ls
```
또한, 여러 명령어를 파이프로 연결하여 사용할 수 있습니다
```bash
ls | grep "minishell"
```

## 파이프 구조 및 파싱 과정

MiniShell 프로젝트는 Bash 셸의 파이프(`|`) 기능을 모델로 한 커맨드 파이프라인 구조를 지원합니다. 이 섹션에서는 MiniShell 내에서 파이프 구조와 명령어 파싱 과정을 어떻게 구현했는지에 대해 설명합니다.

## 파이프 연결 구현

MiniShell 프로젝트에서는 여러 명령어를 파이프(`|`)를 사용하여 연결하는 기능을 구현합니다. 이 섹션에서는 파이프 연결 방식의 구현에 대해 설명합니다.

### 기본 파이프 설정 (`set_pipe`)

`set_pipe` 함수는 명령어 간의 기본 파이프 연결을 설정합니다. 이 함수는 각 명령어를 별도의 프로세스에서 실행하며, `dup2` 시스템 콜을 사용하여 표준 입력(`stdin`)과 표준 출력(`stdout`)을 적절한 파이프 끝에 연결합니다.

- 자식 프로세스(`pid == 0`)에서는 현재 명령어의 입력을 파이프의 읽기 끝 또는 지정된 입력 파일로, 출력을 파이프의 쓰기 끝 또는 지정된 출력 파일로 리디렉션합니다.
- 부모 프로세스에서는 사용된 파일 디스크립터를 닫고, 다음 명령어의 입력이 현재 명령어의 출력으로 설정되도록 준비합니다.

### 마지막 명령어 파이프 설정 (`set_pipe_last`)

`set_pipe_last` 함수는 파이프라인의 마지막 명령어에 대한 설정을 담당합니다. 이 함수는 마지막 명령어의 표준 입력과 출력을 최종 목적지에 연결하고, 필요 없는 파이프 끝을 닫습니다.

### 내장 명령어 처리 (`set_pipe_builtin_last`)

`set_pipe_builtin_last` 함수는 파이프라인에서 마지막 명령어가 내장 명령어인 경우의 특별한 처리를 담당합니다. 내장 명령어는 별도의 프로세스를 생성하지 않고 현재 셸 프로세스 내에서 실행되기 때문에, 입출력 리디렉션 처리 방식이 조금 다릅니다.

### 파이프 연결 시퀀스 (`pipe_sequence`)

`pipe_sequence` 함수는 주어진 명령어 리스트에 대해 적절한 파이프 설정 함수를 호출합니다. 이 함수는 명령어가 마지막인지, 다음 명령어가 있는지, 마지막 명령어가 내장 명령어인지를 판단하여, 상황에 맞는 파이프 설정 함수(`set_pipe`, `set_pipe_last`, `set_pipe_builtin_last`)를 호출합니다.

### 구현 예시

MiniShell의 파이프 연결 구현은 다음과 같은 고려 사항을 반영합니다:

- 명령어 간 데이터 흐름을 관리하기 위해 Unix 파이프를 사용합니다.
- `dup2` 시스템 콜을 사용하여 명령어의 입출력을 파이프에 연결합니다.
- 모든 명령어가 처리된 후에는 사용되지 않는 파이프와 파일 디스크립터를 정리합니다.

이러한 방식으로 MiniShell은 복잡한 파이프라인을 효율적으로 처리하며, 사용자가 Bash 셸에서 기대하는 입출력 리디렉션 및 파이프라인 기능을 제공합니다.



